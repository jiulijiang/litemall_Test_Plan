# 接口测试用例文档 - 下单业务流程

## 1. 下单业务流程测试用例

| ID  | 模块         | 用例名称                | 优先级 | 接口名称       | 前置条件                                                       | 请求URL                                                                                                    | 请求类型 | 请求头                                                               | 请求参数类型 | 请求参数                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         | 预期响应状态码 | 预期返回数据                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         | 实际响应状态码 | 执行结果 | 实际返回结果 |
| --- | ------------ | ----------------------- | ------ | -------------- | -------------------------------------------------------------- | ---------------------------------------------------------------------------------------------------------- | -------- | -------------------------------------------------------------------- | ------------ | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | -------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ | -------------- | -------- | ------------ |
| 001 | 下单业务流程 | 下单成功-完整流程       | P0     | 多个接口组合   | 系统中存在已注册用户"user123"，密码为"user123"，且有可购买商品 | 多个接口组合（登录、搜索、商品详情、加入购物车、查看购物车、选中商品、添加地址、结算、提交订单、查看订单） | 组合请求 | Content-Type: application/json`<br>`X-Litemall-Token: [登录后获取] | JSON         | 1. 登录: {"username":"user123","password":"user123"}`<br>`2. 搜索: /wx/goods/list?keyword=母亲节&page=1&limit=10`<br>`3. 商品详情: /wx/goods/detail?id=1181000`<br>`4. 加入购物车: {"goodsId":1181000,"number":1,"productId":2}`<br>`5. 查看购物车: /wx/cart/index`<br>`6. 选中商品: {"productIds":[2],"isChecked":1}`<br>`7. 添加地址: {"name":"张三","tel":"13611224455","country":"China","province":"Beijing","city":"Beijing","county":"HaiDian","areaCode":"110101","postalCode":"100091","addressDetail":"测试地址","isDefault":true}`<br>`8. 结算: /wx/cart/checkout?cartId=0&addressId=2&couponId=0&userCouponId=0&grouponRulesId=0`<br>`9. 提交订单: {"addressId":"2","cartId":"0","couponId":"0","userCouponId":"0","grouponLinkId":0,"grouponRulesId":0,"message":""}`<br>`10. 查看订单: /wx/order/list?showType=0&page=1&limit=10 | 多个接口200    | 1. 登录: {"errno":0,"data":{"userInfo":{"nickName":"user123","avatarUrl":""},"token":"[有效token]"},"errmsg":"成功"}`<br>`2. 搜索: {"errno":0,"data":{"total":1,"pages":1,"limit":10,"page":1,"list":[{"id":1181000,"name":"母亲节礼物-舒适安睡组合",...}],"filterCategoryList":[...]},"errmsg":"成功"}`<br>`3. 商品详情: {"errno":0,"data":{"specificationList":[...],...},"errmsg":"成功"}`<br>`4. 加入购物车: {"errno":0,"data":1,"errmsg":"成功"}`<br>`5. 查看购物车: {"errno":0,"data":{"cartTotal":{...},"cartList":[...]},"errmsg":"成功"}`<br>`6. 选中商品: {"errno":0,"data":{"cartTotal":{...},"cartList":[...]},"errmsg":"成功"}`<br>`7. 添加地址: {"errno":0,"data":2,"errmsg":"成功"}`<br>`8. 结算: {"errno":0,"data":{"actualPrice":1500.00,"checkedGoodsList":[...]},"errmsg":"成功"}`<br>`9. 提交订单: {"errno":0,"data":{"orderId":[新订单ID],"grouponLinkId":0},"errmsg":"成功"}`<br>`10. 查看订单: {"errno":0,"data":{"total":1,"pages":1,"limit":10,"page":1,"list":[{"orderStatusText":"未付款","actualPrice":1500.00,...}]},"errmsg":"成功"} |                |          |              |
| 002 | 下单业务流程 | 下单失败-登录失败       | P1     | 登录接口       | 系统中不存在用户"notexist"或密码错误                           | /wx/auth/login                                                                                             | POST     | Content-Type: application/json                                       | JSON         | {"username":"notexist","password":"wrongpassword"}                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               | 200            | {"errno":[非0错误码],"errmsg":"账号不存在"或"账号密码错误"}                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |                |          |              |
| 003 | 下单业务流程 | 下单失败-加购失败       | P1     | 加入购物车接口 | 用户已登录，但选择不存在的商品或产品ID                         | /wx/cart/add                                                                                               | POST     | Content-Type: application/json`<br>`X-Litemall-Token: [有效token]  | JSON         | {"goodsId":9999999,"number":1,"productId":9999999}                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               | 200            | {"errno":[非0错误码],"errmsg":"商品不存在"或"产品不存在"}                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |                |          |              |
| 004 | 下单业务流程 | 下单失败-提交订单失败   | P1     | 提交订单接口   | 用户已登录，已添加购物车商品，但使用不存在的地址ID             | /wx/order/submit                                                                                           | POST     | Content-Type: application/json`<br>`X-Litemall-Token: [有效token]  | JSON         | {"addressId":"999","cartId":"0","couponId":"0","userCouponId":"0","grouponLinkId":0,"grouponRulesId":0,"message":""}                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             | 200            | {"errno":[非0错误码],"errmsg":"收货地址不存在"}                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |                |          |              |
| 005 | 下单业务流程 | 下单失败-未登录提交订单 | P1     | 提交订单接口   | 用户未登录                                                     | /wx/order/submit                                                                                           | POST     | Content-Type: application/json                                       | JSON         | {"addressId":"2","cartId":"0","couponId":"0","userCouponId":"0","grouponLinkId":0,"grouponRulesId":0,"message":""}                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               | 200            | {"errno":[非0错误码],"errmsg":"请先登录"}                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |                |          |              |
